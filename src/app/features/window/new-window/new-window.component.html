<h1 class="p-20">Ajouter une nouvelle référence</h1>
<form [formGroup]="windowForm" (ngSubmit)="submit()">
  <mat-card class="container ">
    <h2>Information de la voiture</h2>
    <div fxLayout="row wrap"
         fxLayoutAlign="space-between space-between"
         fxLayoutGap="3px">
      <mat-form-field class="" appearance="fill">
        <mat-label>brand</mat-label>
        <input #myinput (keydown)="setBrandDownKey()" formControlName="brand" matInput [formControl]="myControl"
               [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
          <mat-option (click)="setBrand(brand); setBrandDownKey()" *ngFor="let brand of filteredOptions | async"
                      [value]="brand">
            {{brand.brandName}}
          </mat-option>
        </mat-autocomplete>
        <mat-error *ngIf="windowForm.controls['brand'].hasError('required')">
          Please enter a value
        </mat-error>
        <mat-error *ngIf="windowForm.controls['brand'].hasError('incorrecte')">
          Please select a valid project
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Type de carroserie</mat-label>
        <mat-select formControlName="body">
          <mat-option *ngFor="let body of bodyShellType" [value]="body">
            {{body.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>


      <!--      <div class="">-->
      <!--        <mat-form-field appearance="fill">-->
      <!--          <mat-label>type</mat-label>-->
      <!--          <input type="text" formControlName="type" matInput>-->
      <!--          <mat-error *ngIf="windowForm.controls['type'].hasError('incorrecte')">-->
      <!--            Please select a valid project-->
      <!--          </mat-error>-->
      <!--        </mat-form-field>-->
      <!--      </div>-->

      <!--      <div class="">-->
      <!--        <mat-form-field appearance="fill">-->
      <!--          <mat-label>Model</mat-label>-->
      <!--          <input formControlName="model" matInput>-->
      <!--        </mat-form-field>-->
      <!--      </div>-->

      <mat-form-field appearance="fill">
        <mat-label>Model</mat-label>
        <mat-select formControlName="model">
          <mat-option *ngFor="let model of models | async" [value]="model">
            {{model.modelName}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <!--      <div class="">-->
      <!--        <mat-form-field appearance="fill">-->
      <!--          <mat-label>Prix</mat-label>-->
      <!--          <input type="number" formControlName="unitSalePrice" matInput>-->
      <!--        </mat-form-field>-->
      <!--      </div>-->

    </div>

    <hr>
    <h2>Information de la vitre</h2>

    <div fxLayout="row wrap"
         fxLayoutAlign="space-between space-between"
         fxLayoutGap="3px">
      <mat-form-field appearance="fill">
        <mat-label>Type de la fenêtre</mat-label>
        <mat-select formControlName="type">
          <mat-option *ngFor="let type of windowsType" [value]="type">
            {{type.name}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="this.type">
          Please enter a value
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Code</mat-label>
        <input formControlName="code" matInput type="text" value="code">
<!--        <mat-error *ngIf="windowForm.controls['code'].hasError('required')">-->
        <mat-error *ngIf="this.code">
          Please enter a value
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Nom</mat-label>
        <input formControlName="name" matInput type="text" value="name">
        <mat-error *ngIf="this.name">
          Please enter a value
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Prix de vente</mat-label>
        <input formControlName="price" matInput type="number" value="price">
      </mat-form-field>
    </div>


    <hr>
    <div class="actions "
         fxLayoutAlign="end">
      <button [disabled]="windowForm.invalid" class="btn btn-primary">Valider</button>
      <button mat-button color="accent" type="button" routerLink=".." class="btn btn-secondary">Annuler</button>
    </div>


  </mat-card>


</form>
